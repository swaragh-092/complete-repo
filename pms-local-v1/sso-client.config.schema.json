{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "sso-client.config.schema.json",
  "title": "SSO Client Configuration",
  "description": "Configuration schema for sso-cli-tools",
  "type": "object",
  "properties": {
    "$schema": {
      "type": "string",
      "description": "JSON Schema reference"
    },
    "protocol": {
      "type": "string",
      "enum": [
        "http",
        "https"
      ],
      "default": "https",
      "description": "Protocol for service URLs"
    },
    "domain": {
      "type": "string",
      "default": "local.test",
      "description": "Base domain for all services"
    },
    "dockerMode": {
      "type": "boolean",
      "default": false,
      "description": "Enable Docker mode (no ports in URLs)"
    },
    "authServicePort": {
      "type": "integer",
      "minimum": 1024,
      "maximum": 65535,
      "default": 4000,
      "description": "Auth service port"
    },
    "accountUiPort": {
      "type": "integer",
      "minimum": 1024,
      "maximum": 65535,
      "default": 5174,
      "description": "Account UI port"
    },
    "theme": {
      "type": "string",
      "enum": [
        "default",
        "corporate",
        "modern",
        "sunset",
        "midnight"
      ],
      "default": "default",
      "description": "Theme preset for generated apps"
    },
    "features": {
      "type": "object",
      "description": "Feature flags for generated applications",
      "properties": {
        "enableMFA": {
          "type": "boolean",
          "default": true,
          "description": "Enable Multi-Factor Authentication"
        },
        "enableSocialLogin": {
          "type": "boolean",
          "default": true,
          "description": "Enable social login providers"
        },
        "enablePasswordless": {
          "type": "boolean",
          "default": false,
          "description": "Enable passwordless authentication"
        },
        "enableIdleTimeout": {
          "type": "boolean",
          "default": true,
          "description": "Enable idle timeout logout"
        },
        "enableCrossTabSync": {
          "type": "boolean",
          "default": true,
          "description": "Sync logout across browser tabs"
        },
        "enableSessionValidation": {
          "type": "boolean",
          "default": true,
          "description": "Periodic session validation"
        },
        "enableProactiveRefresh": {
          "type": "boolean",
          "default": true,
          "description": "Proactively refresh tokens before expiry"
        },
        "enableDarkMode": {
          "type": "boolean",
          "default": true,
          "description": "Enable dark mode support"
        },
        "enableThemeSwitcher": {
          "type": "boolean",
          "default": true,
          "description": "Show theme switcher in UI"
        },
        "generateTests": {
          "type": "boolean",
          "default": false,
          "description": "Generate unit tests"
        },
        "generateStorybook": {
          "type": "boolean",
          "default": false,
          "description": "Generate Storybook stories"
        },
        "generateDocker": {
          "type": "boolean",
          "default": false,
          "description": "Generate Docker configuration"
        },
        "enableAuditLogs": {
          "type": "boolean",
          "default": true,
          "description": "Enable audit logging"
        }
      },
      "additionalProperties": false
    },
    "session": {
      "type": "object",
      "description": "Session security configuration",
      "properties": {
        "tokenRefreshBuffer": {
          "type": "integer",
          "minimum": 30,
          "maximum": 600,
          "default": 120,
          "description": "Seconds before token expiry to trigger refresh"
        },
        "sessionValidationInterval": {
          "type": "integer",
          "minimum": 60000,
          "maximum": 3600000,
          "default": 300000,
          "description": "Session validation interval in milliseconds (5 min default)"
        },
        "idleTimeoutMs": {
          "type": "integer",
          "minimum": 300000,
          "maximum": 86400000,
          "default": 1800000,
          "description": "Idle timeout in milliseconds (30 min default)"
        },
        "skipValidationWhenHidden": {
          "type": "boolean",
          "default": true,
          "description": "Skip validation when browser tab is hidden"
        },
        "validateOnVisibility": {
          "type": "boolean",
          "default": false,
          "description": "Validate session when tab becomes visible"
        },
        "apiTimeout": {
          "type": "integer",
          "minimum": 5000,
          "maximum": 60000,
          "default": 10000,
          "description": "API request timeout in milliseconds"
        },
        "validationRetries": {
          "type": "integer",
          "minimum": 1,
          "maximum": 10,
          "default": 3,
          "description": "Number of validation retry attempts"
        },
        "retryDelay": {
          "type": "integer",
          "minimum": 500,
          "maximum": 10000,
          "default": 1000,
          "description": "Delay between retries in milliseconds"
        }
      },
      "additionalProperties": false
    }
  },
  "additionalProperties": false
}