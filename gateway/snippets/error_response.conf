# ============================================================================
# Error Response Handler
# ============================================================================
# Purpose: Consistent JSON error responses for API gateway
# ============================================================================

# Error page mappings
error_page 401 = @error401;
error_page 403 = @error403;
error_page 404 = @error404;
error_page 500 502 503 504 = @error500;

# ============================================================================
# Error Locations
# ============================================================================

location @error401 {
    default_type application/json;
    include /etc/nginx/snippets/security_headers.conf;
    return 401 '{"error":"Unauthorized","code":401}';
}

location @error403 {
    default_type application/json;
    include /etc/nginx/snippets/security_headers.conf;
    return 403 '{"error":"Forbidden","code":403}';
}

location @error404 {
    default_type application/json;
    include /etc/nginx/snippets/security_headers.conf;
    return 404 '{"error":"Not Found","code":404}';
}

location @error500 {
    default_type application/json;
    include /etc/nginx/snippets/security_headers.conf;
    return 500 '{"error":"Internal Server Error","code":500}';
}
